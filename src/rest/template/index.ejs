<!DOCTYPE html>
<html lang="fr">
<head>
    <title>température</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</head>
<body>
<div class="container mt-5">
    <% if (locals.temp) { %>
        <h3>température de la ville<b> <span id="v"></span> : <%= temp %>°C</b></h3>
    <% } %>
    <div class="row justify-content-center">
        <form class="col-5 text-center">
            <input id="ville" type="text" placeholder="ville" class="form-control" required>
            <button class="btn btn-primary mt-1">Chercher</button>
        </form>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>
<script>
	let ville = document.getElementById("ville")
	ville.value = decodeURI(location.pathname.substring(location.pathname.lastIndexOf('/') + 1))
    if(ville.value !== "")
    	document.getElementById("v").innerText = ville.value

    document.forms[0].addEventListener("submit", function(e) {
    	e.preventDefault()
	    if (ville.value === "")
		    return
	    location.href = "/temp/" + encodeURI(ville.value)
    })

</script>
</body>
</html>
